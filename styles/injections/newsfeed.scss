@keyframes marquee-move {
  from {
    transform: translateX(var(--ticker-width));
  }
  to {
    transform: translateX(calc(-1 * var(--marquee-width)));
  }
}

.sr3e.sheet.character {
  .window-header {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    flex-wrap: nowrap;

    // Ensure window icon and title don't interfere
    .window-icon,
    .window-title {
      flex: 0 0 auto;
    }

    // Keep header controls on the right
    .header-control {
      flex: 0 0 auto;
      order: 1;
    }

    .news-feed-position {
      flex: 1 1 auto;
      min-width: 0;
      min-height: 2.5rem;
      pointer-events: none;
      display: flex;
      align-items: center;
      order: 0;

      .ticker {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 100%;
        height: 2.5rem;
        overflow: hidden;

      .marquee-outer {
        position: relative;
        width: 100%;
        height: 100%;
        overflow: hidden;
        display: flex;
        align-items: center;
        white-space: nowrap;
        backdrop-filter: blur(8px);

        // Cyan-tinted gradient fade on left edge
        &::before {
          content: "";
          position: absolute;
          left: 0;
          top: 0;
          bottom: 0;
          width: 50%;
          background: linear-gradient(
            to right,
            var(--accent-color) 0%,
            rgba(0, 255, 255, 0.5) 25%,
            rgba(0, 255, 255, 0.2) 50%,
            rgba(255, 255, 255, 0) 100%
          );
          pointer-events: none;
          z-index: 3;
        }

        // Cyan-tinted gradient fade on right edge
        &::after {
          content: "";
          position: absolute;
          right: 0;
          top: 0;
          bottom: 0;
          width: 50%;
          background: linear-gradient(
            to left,
            var(--accent-color) 0%,
            rgba(0, 255, 255, 0.5) 25%,
            rgba(0, 255, 255, 0.2) 50%,
            rgba(255, 255, 255, 0) 100%
          );
          pointer-events: none;
          z-index: 3;
        }

        .marquee-inner {
          display: inline-flex;
          white-space: nowrap;
          animation: marquee-move var(--marquee-duration, 20s) linear infinite;
          animation-delay: var(--marquee-delay, 0s);
          will-change: transform;
          align-items: center;
          height: 100%;
          contain: layout style paint;
          isolation: isolate;

          .marquee-item {
            display: inline-flex;
            align-items: center;
            padding: 0 2rem;
            white-space: nowrap;
            flex-shrink: 0;
            font-size: 1.5rem;
            font-weight: 500;
            color: var(--accent-color);
            text-shadow:
              0 0 3px oklch(0% 0 0 / 0.35),
              0 0 6px oklch(0% 0 0 / 0.25);
            letter-spacing: 0.025em;
            line-height: 1;
            contain: layout paint style;
            will-change: contents;

            // Disabled glow animation to prevent flicker when carts update
            // animation: news-glow 3s ease-in-out infinite;

            // &:nth-child(2n) {
            //   animation-delay: 1.5s;
            // }
          }
        }
      }
      }

      // Ensure ticker is visible but doesn't block interactions
      * {
        pointer-events: none;
      }
    }
  }

  @keyframes news-glow {
    0%, 100% {
      text-shadow:
        0 0 3px rgba(0, 0, 0, 0.8),
        0 0 6px rgba(0, 0, 0, 0.6),
        0 0 10px color-mix(in srgb, var(--accent-color) 40%, transparent);
    }
    50% {
      text-shadow:
        0 0 3px rgba(0, 0, 0, 0.8),
        0 0 6px rgba(0, 0, 0, 0.6),
        0 0 10px color-mix(in srgb, var(--accent-color) 60%, transparent),
        0 0 15px color-mix(in srgb, var(--accent-color) 30%, transparent);
    }
  }
}
