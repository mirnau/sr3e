{"version":3,"file":"ActiveEffectsEditor-CZCeJj3c.js","sources":["../../module/svelte/apps/components/ActiveEffects/ActiveEffectsEditorApp.svelte","../../module/foundry/applications/ActiveEffectsEditor.js"],"sourcesContent":["<script>\r\n   import Image from \"../basic/Image.svelte\";\r\n   import ItemSheetComponent from \"../basic/ItemSheetComponent.svelte\";\r\n   import ComboSearch from \"../basic/ComboSearch.svelte\";\r\n   import { flags } from \"@services/commonConsts.js\";\r\n   import { localize } from \"@services/utilities.js\";\r\n   import { StoreManager } from \"@sveltehelpers/StoreManager.svelte.js\";\r\n   import { onDestroy, onMount } from \"svelte\";\r\n   import CharacterModel from \"../../../../models/actor/CharacterModel.js\";\r\n\r\n   let { document, activeEffect, config, updateEffectsState } = $props();\r\n   let disabled = $state(activeEffect.disabled);\r\n   let duration = $state({ ...activeEffect.duration, value: 0 });\r\n   let changes = $state([...activeEffect.changes]);\r\n   let propertyOptions = $state([]);\r\n   let name = $state(activeEffect.name);\r\n   let originIsItem = $state(false);\r\n   let origin = $state({});\r\n   let target = $state(\"self\");\r\n   let isTransferable = $state(false);\r\n\r\n   let storeManager = StoreManager.Subscribe(document);\r\n\r\n   let nameStore = storeManager.GetShallowStore(document.id, `${activeEffect.id}:name`, activeEffect.name);\r\n   let durationStore = storeManager.GetShallowStore(document.id, `${activeEffect.id}:duration`, activeEffect.duration);\r\n   let disabledStore = storeManager.GetShallowStore(document.id, `${activeEffect.id}:disabled`, activeEffect.disabled);\r\n   let targetStore = storeManager.GetShallowStore(document.id, `${activeEffect.id}:target`, target);\r\n\r\n   onMount(async () => {\r\n      origin = await foundry.utils.fromUuid(activeEffect.origin);\r\n      originIsItem = origin instanceof Item;\r\n\r\n      const storedName = $nameStore;\r\n      const storedDuration = $durationStore;\r\n      const storedDisabled = $disabledStore;\r\n\r\n      const flagTarget = getProperty(activeEffect, `flags.${flags.sr3e}.target`);\r\n      if (flagTarget) {\r\n         target = flagTarget;\r\n         $targetStore = target;\r\n      }\r\n\r\n      const baseDuration =\r\n         JSON.stringify(storedDuration) !== JSON.stringify(activeEffect.duration)\r\n            ? storedDuration\r\n            : activeEffect.duration;\r\n\r\n      duration = {\r\n         ...baseDuration,\r\n         value: baseDuration[baseDuration.type] ?? 0,\r\n      };\r\n\r\n      if (storedName !== activeEffect.name) name = storedName;\r\n      if (storedDisabled !== activeEffect.disabled) disabled = storedDisabled;\r\n\r\n      $nameStore = name;\r\n      $disabledStore = disabled;\r\n      $durationStore = duration;\r\n   });\r\n\r\n   onDestroy(() => {\r\n      commitChanges();\r\n      StoreManager.Unsubscribe(document);\r\n   });\r\n\r\n   function setDurationField(field, val) {\r\n      duration = { ...duration, [field]: field === \"value\" ? +val : val };\r\n      $durationStore = duration;\r\n   }\r\n\r\n   $effect(() => {\r\n      $disabledStore = disabled;\r\n   });\r\n\r\n   $effect(() => {\r\n      $nameStore = name;\r\n   });\r\n\r\n   $effect(() => {\r\n      $targetStore = target;\r\n   });\r\n\r\n   let allowedPatterns = [];\r\n\r\n   $effect(async () => {\r\n      if (!origin?.toObject) return;\r\n\r\n      let rawPaths = [];\r\n\r\n      switch (target) {\r\n         case \"self\": {\r\n            allowedPatterns = [\"system\"];\r\n            isTransferable = false;\r\n            rawPaths = Object.keys(foundry.utils.flattenObject({ system: origin.toObject().system }));\r\n            break;\r\n         }\r\n         case \"character\": {\r\n            allowedPatterns = [\"system.attributes\", \"system.dicePools\", \"system.movement\", \"system.karma\"];\r\n            isTransferable = true;\r\n            const model = new CharacterModel({}, { parent: null });\r\n            const raw = model.toObject();\r\n            rawPaths = Object.keys(foundry.utils.flattenObject({ system: raw }));\r\n            break;\r\n         }\r\n         case \"vehicle\": {\r\n            throw new Error(\"Target 'vehicle' not yet supported in ActiveEffectsEditorApp.\");\r\n         }\r\n         default: {\r\n            console.warn(`Unhandled target type: ${target}`);\r\n         }\r\n      }\r\n\r\n      const newOptions = rawPaths\r\n         .filter((path) => allowedPatterns.some((p) => path.startsWith(p)) && path.endsWith(\".mod\"))\r\n         .map((path) => ({\r\n            value: path,\r\n            label: getLocalizedPath(path),\r\n         }))\r\n         .sort((a, b) => a.label.localeCompare(b.label));\r\n\r\n      if (JSON.stringify(newOptions) !== JSON.stringify(propertyOptions)) {\r\n         propertyOptions = newOptions;\r\n      }\r\n   });\r\n\r\n   function getLocalizedPath(path) {\r\n      if (!path.startsWith(\"system.\") || !path.endsWith(\".mod\")) return path;\r\n\r\n      const configPath = path.replace(/^system\\./, \"\").replace(/\\.mod$/, \"\");\r\n      const segments = configPath.split(\".\");\r\n\r\n      const localizedSegments = segments.map((segment) => {\r\n         const configValue = getProperty(config, `${segments[0]}.${segment}`);\r\n         return configValue ? localize(configValue) : segment.charAt(0).toUpperCase() + segment.slice(1);\r\n      });\r\n\r\n      return localizedSegments.join(\" > \");\r\n   }\r\n\r\n   function extractValue(value) {\r\n      return value && typeof value === \"object\" && \"value\" in value ? value.value : value;\r\n   }\r\n\r\n   async function commitChanges() {\r\n      const key = duration.type;\r\n      const expandedDuration = {\r\n         type: key,\r\n         rounds: key === \"rounds\" ? duration.value : undefined,\r\n         seconds: key === \"seconds\" ? duration.value : undefined,\r\n         turns: key === \"turns\" ? duration.value : undefined,\r\n         startTime: duration.startTime,\r\n         startRound: duration.startRound,\r\n         startTurn: duration.startTurn,\r\n         combat: duration.combat,\r\n      };\r\n\r\n      await activeEffect.update(\r\n         {\r\n            name: extractValue(name),\r\n            transfer: isTransferable,\r\n            disabled,\r\n            duration: expandedDuration,\r\n            changes: [...changes],\r\n            flags: {\r\n               ...(activeEffect.flags ?? {}),\r\n               [flags.sr3e]: {\r\n                  ...(activeEffect.flags?.[flags.sr3e] ?? {}),\r\n                  target,\r\n               },\r\n            },\r\n         },\r\n         { render: false }\r\n      );\r\n   }\r\n\r\n   function addChange() {\r\n      changes = [...changes, { key: \"\", mode: 1, value: \"\", priority: 0 }];\r\n      commitChanges();\r\n   }\r\n\r\n   function updateChange(index, field, value) {\r\n      const extractedValue = extractValue(value);\r\n      changes = changes.map((c, i) => (i === index ? { ...c, [field]: extractedValue } : c));\r\n      commitChanges();\r\n   }\r\n\r\n   function deleteChange(index) {\r\n      changes.splice(index, 1);\r\n      changes = [...changes];\r\n      commitChanges();\r\n   }\r\n</script>\r\n\r\n<div class=\"effects-editor\">\r\n   <ItemSheetComponent>\r\n      <h3>{localize(config.effects.effectscomposer)}</h3>\r\n      <div class=\"stat-grid single-column\">\r\n         <Image src={activeEffect.img} title={extractValue(name)} entity={activeEffect} />\r\n\r\n         <div class=\"stat-card\">\r\n            <div class=\"stat-card-background\"></div>\r\n            <h4>{localize(config.effects.name)}:</h4>\r\n            <input type=\"text\" bind:value={name} onblur={commitChanges} />\r\n         </div>\r\n\r\n         <div class=\"stat-card\">\r\n            <div class=\"stat-card-background\"></div>\r\n            <h4>{localize(config.effects.target)}:</h4>\r\n            <select bind:value={target} onchange={commitChanges}>\r\n               <option value=\"self\">self</option>\r\n               <option value=\"item\" disabled>item</option>\r\n               <option value=\"character\">character</option>\r\n               <option value=\"vehicle\" disabled>vehicle</option>\r\n            </select>\r\n         </div>\r\n\r\n         <div class=\"stat-card\">\r\n            <div class=\"stat-card-background\"></div>\r\n            <h4>{localize(config.effects.disabled)}:</h4>\r\n            <input type=\"checkbox\" bind:checked={disabled} onchange={commitChanges} />\r\n         </div>\r\n\r\n         <div class=\"stat-card\">\r\n            <div class=\"stat-card-background\"></div>\r\n            <h4>{localize(config.effects.durationType)}:</h4>\r\n            <select bind:value={duration.type} onchange={(e) => setDurationField(\"type\", e.target.value)}>\r\n               <option value=\"none\">{localize(config.effects.permanent)}</option>\r\n               <option value=\"turns\">{localize(config.time.turns)}</option>\r\n               <option value=\"rounds\">{localize(config.time.rounds)}</option>\r\n               <option value=\"seconds\">{localize(config.time.seconds)}</option>\r\n               <option value=\"minutes\">{localize(config.time.minutes)}</option>\r\n               <option value=\"hours\">{localize(config.time.hours)}</option>\r\n               <option value=\"days\">{localize(config.time.days)}</option>\r\n            </select>\r\n         </div>\r\n\r\n         {#if duration.type !== \"none\"}\r\n            <div class=\"stat-card\">\r\n               <div class=\"stat-card-background\"></div>\r\n               <h4>{localize(config.effects.durationValue)}:</h4>\r\n               <input\r\n                  type=\"number\"\r\n                  bind:value={duration.value}\r\n                  oninput={(e) => setDurationField(\"value\", e.target.value)}\r\n                  onblur={commitChanges}\r\n               />\r\n            </div>\r\n         {/if}\r\n      </div>\r\n   </ItemSheetComponent>\r\n\r\n   <ItemSheetComponent>\r\n      <h1>{localize(config.effects.changesHeader)}</h1>\r\n      <button onclick={addChange}>{localize(config.effects.addChange)}</button>\r\n\r\n      <div class=\"table-wrapper\">\r\n         <table>\r\n            <thead>\r\n               <tr>\r\n                  <th>{localize(config.effects.attributeKey)}</th>\r\n                  <th>{localize(config.effects.changeMode)}</th>\r\n                  <th>{localize(config.effects.value)}</th>\r\n                  <th>{localize(config.effects.priority)}</th>\r\n                  <th>{localize(config.effects.actions)}</th>\r\n               </tr>\r\n            </thead>\r\n            <tbody>\r\n               {#each changes as change, i}\r\n                  <tr>\r\n                     <td>\r\n                        <div class=\"stat-card\">\r\n                           <div class=\"stat-card-background\"></div>\r\n                           <ComboSearch\r\n                              options={propertyOptions}\r\n                              placeholder={localize(config.effects.selectProperty)}\r\n                              nomatchplaceholder={localize(config.effects.noMatch)}\r\n                              bind:value={changes[i].key}\r\n                              onselect={(e) => updateChange(i, \"key\", e.detail.value)}\r\n                              css=\"table\"\r\n                           />\r\n                        </div>\r\n                     </td>\r\n                     <td>\r\n                        <div class=\"stat-card\">\r\n                           <div class=\"stat-card-background\"></div>\r\n                           <select\r\n                              bind:value={change.mode}\r\n                              onchange={(e) => updateChange(i, \"mode\", parseInt(e.target.value))}\r\n                           >\r\n                              {#each Object.entries(CONST.ACTIVE_EFFECT_MODES).filter(([label]) => label !== \"CUSTOM\" && label !== \"MULTIPLY\") as [label, val]}\r\n                                 <option value={val}>{label}</option>\r\n                              {/each}\r\n                           </select>\r\n                        </div>\r\n                     </td>\r\n                     <td>\r\n                        <div class=\"stat-card\">\r\n                           <div class=\"stat-card-background\"></div>\r\n                           <input\r\n                              type=\"text\"\r\n                              value={change.value}\r\n                              oninput={(e) => updateChange(i, \"value\", e.target.value)}\r\n                           />\r\n                        </div>\r\n                     </td>\r\n                     <td>\r\n                        <div class=\"stat-card\">\r\n                           <div class=\"stat-card-background\"></div>\r\n                           <input\r\n                              type=\"number\"\r\n                              value={change.priority}\r\n                              oninput={(e) => updateChange(i, \"priority\", +e.target.value)}\r\n                           />\r\n                        </div>\r\n                     </td>\r\n                     <td>\r\n                        <button onclick={() => deleteChange(i)}>ðŸ—‘</button>\r\n                     </td>\r\n                  </tr>\r\n               {/each}\r\n            </tbody>\r\n         </table>\r\n      </div>\r\n   </ItemSheetComponent>\r\n</div>\r\n","import ActiveEffectsEditorApp from \"../../svelte/apps/components/ActiveEffects/ActiveEffectsEditorApp.svelte\";\r\nimport { mount, unmount, onDestroy } from \"svelte\";\r\n\r\nexport default class ActiveEffectsEditor extends foundry.applications.api.ApplicationV2 {\r\n   #app;\r\n\r\n   constructor(document, activeEffect, config, updateEffectsState) {\r\n\t\tconst appId = ActiveEffectsEditor.getAppIdFor(activeEffect.id);\r\n\t\tsuper({ id: appId });\r\n\r\n      this.doc = document;\r\n      this.activeEffect = activeEffect;\r\n      this.config = config;\r\n      this.updateEffectsState = updateEffectsState;\r\n   }\r\n\r\n   static getAppIdFor(docId) {\r\n      return `sr3e-active-effect-editor-${docId}`;\r\n   }\r\n\r\n   static getExisting(docId) {\r\n      const appId = this.getAppIdFor(docId);\r\n      return Object.values(ui.windows).find((app) => app.id === appId);\r\n   }\r\n\r\n   static launch(document, config) {\r\n      const existing = this.getExisting(document.id);\r\n      if (existing) {\r\n         existing.bringToTop();\r\n         return existing;\r\n      }\r\n      const sheet = new this(document, config);\r\n      sheet.render(true);\r\n      return sheet;\r\n   }\r\n\r\n   static DEFAULT_OPTIONS = {\r\n      classes: [\"sr3e\", \"active-effects-editor\"],\r\n      window: {\r\n         title: \"Edit Active Effects\",\r\n         resizable: true,\r\n      },\r\n      position: {\r\n         width: \"auto\",\r\n         height: \"auto\",\r\n      },\r\n   };\r\n\r\n   _renderHTML() {\r\n      return null;\r\n   }\r\n\r\n   _replaceHTML(_, windowContent) {\r\n      if (this.#app) {\r\n         unmount(this.#app);\r\n      }\r\n\r\n      this.#app = mount(ActiveEffectsEditorApp, {\r\n         target: windowContent,\r\n         props: {\r\n            document: this.doc,\r\n            activeEffect: this.activeEffect,\r\n            config: CONFIG.sr3e,\r\n            updateEffectsState: this.updateEffectsState,\r\n         },\r\n      });\r\n\r\n      return windowContent;\r\n   }\r\n\r\n   async _tearDown() {\r\n      if (this.#app) await unmount(this.#app);\r\n      this.#app = null;\r\n      return super._tearDown();\r\n   }\r\n}"],"names":["$.proxy","$.state","$.get","$.set","$.user_effect","index","$.derived","$.bind_value","$.bind_select_value","$.bind_checked","$.each","$.index","$$anchor","$.set_value"],"mappings":"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"}